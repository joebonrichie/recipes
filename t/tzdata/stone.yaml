#
# SPDX-FileCopyrightText: Â© 2020-2024 Serpent OS Developers
#
# SPDX-License-Identifier: MPL-2.0
#
name        : tzdata
version     : 2025c
release     : 8
summary     : Sources for time zone and daylight saving time data
license     : Public-Domain
homepage    : https://www.iana.org/time-zones
description : |
    Sources for time zone and daylight saving time data
upstreams   :
    - https://data.iana.org/time-zones/releases/tzdata2025c.tar.gz: 4aa79e4effee53fc4029ffe5f6ebe97937282ebcdf386d5d2da91ce84142f957
    - https://data.iana.org/time-zones/releases/tzcode2025c.tar.gz: 697ebe6625444aef5080f58e49d03424bbb52e08bf483d3ddb5acf10cbd15740
builddeps   :
    - binary(bsdtar-static)
    - binary(make)
environment : |
    export PATH=$PATH:/usr/sbin
setup       : |
    bsdtar-static -xf %(sourcedir)/tzcode*.tar.gz
    bsdtar-static -xf %(sourcedir)/tzdata*.tar.gz
build       : |
    make tzdata.zi
install     : |
    tz="africa antarctica asia australasia backward etcetera europe factory northamerica southamerica"

    zic -y ./yearistype -d %(installroot)/usr/share/zoneinfo -L /dev/null $tz
    zic -y ./yearistype -d %(installroot)/usr/share/zoneinfo/posix -L /dev/null $tz
    zic -y ./yearistype -d %(installroot)/usr/share/zoneinfo/right -L leapseconds $tz
    # Default DST
    zic -y ./yearistype -d %(installroot)/usr/share/zoneinfo -L /dev/null -p America/New_York $tz

    install -m00644 iso3166.tab zone.tab leapseconds tzdata.zi %(installroot)/usr/share/zoneinfo
