#
# SPDX-FileCopyrightText: Â© 2020-2025 Serpent OS Developers
#
# SPDX-License-Identifier: MPL-2.0
#
name        : typescript
version     : 5.9.3
release     : 6
homepage    : https://www.typescriptlang.org
upstreams   :
    - https://registry.npmjs.org/typescript/-/typescript-5.9.3.tgz : 10e108c9cf7d5f2879053dff18515fb405abf2ccef63eaaf017d9c571687a1d3
summary     : A language for application-scale JavaScript
description : |
    TypeScript is a language for application-scale JavaScript. TypeScript adds optional types to JavaScript that support tools for large-scale JavaScript applications for any browser, for any host, on any OS. TypeScript compiles to  readable, standards-based JavaScript.
license     : Apache-2.0
builddeps   :
    - binary(npm-22)
    - binary(npm-24)
    - pkgconfig(zlib)
rundeps     :
    - binary(node)
install     : |
    OLDPATH=${PATH}

    # Nodejs-22 (non-default)
    mkdir tmpinstall
    export PATH=/usr/lib/nodejs-22/bin:$OLDPATH
    npm install -g --prefix tmpinstall %(sourcedir)/typescript-%(version).tgz

    # We only care about the node_modules for non-default nodejs versions
    mkdir -p %(installroot)%(libdir)/
    mv tmpinstall/lib/node_modules %(installroot)%(libdir)/node_modules_22

    # Nodejs-24 (default)
    export PATH=/usr/lib/nodejs-24/bin:$OLDPATH
    npm install -g --prefix %(installroot)%(prefix) %(sourcedir)/typescript-%(version).tgz

    mv %(installroot)%(libdir)/node_modules %(installroot)%(libdir)/node_modules_24
