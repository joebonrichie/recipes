#
# SPDX-FileCopyrightText: Â© 2020-2024 Serpent OS Developers
#
# SPDX-License-Identifier: MPL-2.0
#
name        : ripgrep
version     : 15.1.0
release     : 4
homepage    : https://github.com/BurntSushi/ripgrep
upstreams   :
    - https://github.com/BurntSushi/ripgrep/archive/refs/tags/15.1.0.tar.gz : 046fa01a216793b8bd2750f9d68d4ad43986eb9c0d6122600f993906012972e8
summary     : Recursive text search utility
description : |
    ripgrep recursively searches directories for a regex pattern while respecting your gitignore
license     : MIT
builddeps   :
    - pkgconfig(bash-completion)
    - pkgconfig(libpcre2-8)
networking  : true
setup       : |
    %cargo_fetch
build       : |
    %cargo_build --features 'pcre2'
install     : |
    %cargo_install rg

    completionsdir=`pkg-config --variable=completionsdir bash-completion`
    %install_dir %(installroot)${completionsdir}
    ./target/*/release/rg --generate complete-bash > %(installroot)${completionsdir}/rg

    # man pages
    %install_dir %(installroot)%(mandir)/man1
    ./target/*/release/rg --generate man > %(installroot)%(mandir)/man1/rg.1
check       : |
    %cargo_test --features 'pcre2'
