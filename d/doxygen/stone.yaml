#
# SPDX-FileCopyrightText: Â© 2020-2024 Serpent OS Developers
#
# SPDX-License-Identifier: MPL-2.0
#
name        : doxygen
version     : 1.15.0
release     : 10
homepage    :  https://www.doxygen.org/
upstreams   :
    - https://github.com/doxygen/doxygen/archive/refs/tags/Release_1_15_0.tar.gz : b2a79d92a934d4dcda2bb0006e65adbabfcfe83343e024d5f598ff3a62c23dda
summary     : The de-facto standard tool for generating documentation from annotated C++ sources
description : |
    The de-facto standard tool for generating documentation from annotated C++ sources
license     : GPL-2.0-only
builddeps  :
    - binary(bison)
    - binary(flex)
    - binary(python3)
    - pkgconfig(Qt6Core)
    - pkgconfig(Qt6Svg)
    - pkgconfig(spdlog)
    - pkgconfig(sqlite3)
    - clang-devel
rundeps    :
    - graphviz
setup      : |
    %cmake \
        -Dbuild_wizard=ON \
        -Duse_libc++:BOOL=OFF \
        -Duse_libclang:BOOL=ON \
        -Duse_sys_fmt:BOOL=ON \
        -Duse_sys_spdlog:BOOL=ON \
        -Duse_sys_sqlite3:BOOL=ON
build       : |
    %cmake_build
install     : |
    %cmake_install
    %install_file %(builddir)/man/doxy{gen,wizard}.1 -t %(installroot)%(mandir)/man1
packages    :
    - "doxywizard":
        # TODO needs a .desktop file and metainfo
        description: |
            Doxywizard is a graphical front-end to read/edit/write doxygen configuration files and to launch doxygen
        paths:
            - /usr/bin/doxywizard
            - /usr/share/man/man1/doxywizard.1
        rundeps:
            - binary(doxygen)
            - qt6-wayland
