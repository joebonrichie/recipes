#
# SPDX-FileCopyrightText: Â© 2020-2024 Serpent OS Developers
#
# SPDX-License-Identifier: MPL-2.0
#
name        : cups-browsed
version     : 2.1.1
release     : 4
homepage    : https://github.com/OpenPrinting/cups-browsed
upstreams   :
    - https://github.com/OpenPrinting/cups-browsed/releases/download/2.1.1/cups-browsed-2.1.1.tar.gz : bc9ed54ef6940a6ee076f8627458fbc3cfed9b2f7bf4ef6e865be7644a51ce8f
summary     : cups-browsed, a helper daemon to browse the network for remote CUPS queues and IPP network printers and automatically create local queues pointing to them.
description : |
    cups-browsed, a helper daemon to browse the network for remote CUPS queues and IPP network printers and automatically create local queues pointing to them.
license     :
    - Apache-2.0 WITH LLVM-Exception
builddeps   :
    - binary(gdbus-codegen)
    - binary(tar)
    - pkgconfig(avahi-client)
    - pkgconfig(cups)
    - pkgconfig(libcupsfilters)
    - pkgconfig(libppd)
setup       : |
    %patch %(pkgdir)/0001-Stateless.patch
    %reconfigure \
      --enable-auto-setup-driverless-only
build       : |
    %make
install     : |
    %make_install
    %install_file daemon/cups-browsed.service %(installroot)%(libdir)/systemd/system/cups-browsed.service
    %install_file %(pkgdir)/cups-browsed.preset %(installroot)%(libdir)/systemd/user-preset/50-cups-browsed.preset
#check       : |
#   hangs
#   %make check
