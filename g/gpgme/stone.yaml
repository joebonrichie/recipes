#
# SPDX-FileCopyrightText: Â© 2020-2024 Serpent OS Developers
#
# SPDX-License-Identifier: MPL-2.0
#
name        : gpgme
version     : 2.0.1
release     : 7
homepage    : https://gnupg.org/software/gpgme/index.html
upstreams   :
    - https://www.gnupg.org/ftp/gcrypt/gpgme/gpgme-2.0.1.tar.bz2 : 821ab0695c842eab51752a81980c92b0410c7eadd04103f791d5d2a526784966
summary     : Library to provide easy access to GnuPG
description : |
    GnuPG Made Easy (GPGME) is a library designed to make access to GnuPG easier
    for applications. It provides a High-Level Crypto API for encryption,
    decryption, signing, signature verification and key management.
license     :
    - GPL-2.0-or-later
    - LGPL-2.1-or-later
builddeps   :
    - binary(gpg)
    - binary(gpgconf)
    - pkgconfig(gpg-error)
    - pkgconfig(libassuan)
rundeps     :
    - binary(gpg)
setup       : |
    export LDFLAGS="${LDFLAGS} -lassuan"

    %configure \
        --disable-static
build       : |
    %make
install     : |
    %make_install

    # We don't support this
    rm -rfv %(installroot)/usr/share/common-lisp/

    for i in %(name)-qt6 %(name)-qt6-devel; do
        %install_dir %(installroot)%(docdir)/${i}
        echo "DEPRECATED" > %(installroot)%(docdir)/${i}/README
    done
packages    :
    # TODO: gnupg-key-manage was added in v2.0.1, should it be sorted elsewhere?
    - "%(name)-devel":
        paths:
            - /usr/bin/gpgme-tool
            - /usr/share/info/gpgme.info*

    - "%(name)-qt6":
        summary: Library to provide easy access to GnuPG - Qt6 bindings
        description: Library to provide easy access to GnuPG - Qt6 bindings
        paths:
            - /usr/share/doc/gpgme-qt6/

    - "%(name)-qt6-devel":
        summary: Development files for %(name)-qt6
        description: Development files for %(name)-qt6
        paths:
            - /usr/share/doc/gpgme-qt6-devel/
        rundeps:
            - "%(name)-qt6"
            - "%(name)-devel"
