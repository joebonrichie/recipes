#
# SPDX-FileCopyrightText: Â© 2020-2024 Serpent OS Developers
#
# SPDX-License-Identifier: MPL-2.0
#
name        : gnome-session
version     : 49.2
release     : 27
homepage    : https://gitlab.gnome.org/GNOME/gnome-session
upstreams   :
    - https://download.gnome.org/sources/gnome-session/49/gnome-session-49.2.tar.xz : fcdb4f45d6a60d84e9ecae1e3740bab6e55bab0cb49e0fb38280e9b38f3a8485
summary     : GNOME session manager
description : |
    gnome-session contains the GNOME session manager, as well as a configuration program to choose applications starting on login.
license     :
    - GPL-2.0-or-later
builddeps   :
    - binary(msgfmt)
    - binary(xmlto)
    - binary(xsltproc)
    - pkgconfig(gnome-desktop-4)
    - pkgconfig(gtk4)
    - pkgconfig(json-glib-1.0)
    - pkgconfig(upower-glib)
    - docbook
    - docbook-xsl
rundeps    :
    - binary(boltctl)
    - binary(gnome-keyring)
    - binary(switcherooctl)
    - binary(update-desktop-database)
    - binary(update-mime-database)
    - binary(xdg-open)
    - binary(xdg-user-dirs-gtk-update)
    - pciutils
    - power-profiles-daemon
    - sound-theme-freedesktop
    - wireplumber
environment : |
    %export_docbook_catalogs
setup      : |
    %meson
build      : |
    %meson_build
install    : |
    %meson_install

    %install_file %(pkgdir)/50-gnome.preset %(installroot)%(libdir)/systemd/system-preset/50-gnome.preset

    # Default mimeapps for GNOME
    %install_file %(pkgdir)/gnome-mimeapps.list -t %(installroot)/usr/share/applications

    # KILL IT
    rm -rfv %(installroot)/usr/share/xsessions
