#
# SPDX-FileCopyrightText: Â© 2020-2024 Serpent OS Developers
#
# SPDX-License-Identifier: MPL-2.0
#
name        : libblockdev
version     : 3.4.0
release     : 6
homepage    : https://github.com/storaged-project/libblockdev
upstreams   :
    - https://github.com/storaged-project/libblockdev/releases/download/3.4.0/libblockdev-3.4.0.tar.gz : 65ef9a37babd44b85b8ff9b273f90f9f7d5f8ff7b0c76a8edb69240325fd83f4
summary     : A library for manipulating block devices
description : |
    libblockdev is a C library supporting GObject introspection for manipulation of block devices. It has a plugin-based architecture where each technology (like LVM, Btrfs, MD RAID, Swap,...) is implemented in a separate plugin, possibly with multiple implementations (e.g. using LVM CLI or the new LVM DBus API).
license     : LGPL-2.1-or-later
builddeps   :
    - binary(python3)
    - pkgconfig(bytesize)
    - pkgconfig(devmapper)
    - pkgconfig(ext2fs)
    - pkgconfig(fdisk)
    - pkgconfig(gobject-introspection-1.0)
    - pkgconfig(glib-2.0)
    - pkgconfig(json-glib-1.0)
    - pkgconfig(libatasmart)
    - pkgconfig(libcryptsetup)
    - pkgconfig(libkeyutils)
    - pkgconfig(libkmod)
    # pkgconfig(libndctl)
    - pkgconfig(libnvme)
    - pkgconfig(libparted)
    - pkgconfig(libudev)
    - pkgconfig(nss)
    - pkgconfig(uuid)
    - pkgconfig(yaml-0.1)
    - smartmontools # drivedb.h
setup       : |
    # escrow requires volume_key which is crusty af
    # nvdimm requries ndctl which isn't yet packaged but relatively unimportant
    %configure --without-nvdimm --without-escrow
build       : |
    %make
install     : |
    %make_install
# TODO: Subpackage this up
