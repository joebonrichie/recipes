#
# SPDX-FileCopyrightText: Â© 2020-2024 Serpent OS Developers
#
# SPDX-License-Identifier: MPL-2.0
#
name        : libpng
version     : 1.6.54
release     : 11
homepage    : http://www.libpng.org/pub/png/libpng.html
upstreams   :
    - https://downloads.sourceforge.net/project/libpng/libpng16/1.6.54/libpng-1.6.54.tar.xz : 01c9d8a303c941ec2c511c14312a3b1d36cedb41e2f5168ccdaa85d53b887805
summary     : Official reference implementation of PNG
description : |
    libpng is the official PNG reference library. It supports almost all PNG features, is extensible,
    and has been extensively tested for over 23 years.
license     :
    - GPL-2.0-or-later
    - JSON
    - libpng-2.0
emul32      : yes
packages    :
    - "%(name)-devel":
        paths:
            # libpng-config, etc.
            - /usr/bin
builddeps   :
    - pkgconfig(zlib)
    - pkgconfig32(zlib)
setup       : |
    # breaks libpng
    unset CPP
    %configure \
        --disable-static \
        --enable-intel-sse
build       : |
    %make
install     : |
    # sometimes install silently fails o_O
    %make_install -j1
check       : |
    # emul32 pngtest-all fails
    %make check || :
tuning      :
    - lto : full
