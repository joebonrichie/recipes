#
# SPDX-FileCopyrightText: Â© 2020-2024 Serpent OS Developers
#
# SPDX-License-Identifier: MPL-2.0
#
name        : bpftool
version     : 7.6.0
release     : 4
upstreams   :
    - https://github.com/libbpf/bpftool/releases/download/v7.6.0/bpftool-libbpf-v7.6.0-sources.tar.gz: 786dd16887fa97649eb6abed42c56aa45fd4592c8bd3a7aa4d4e7ca5d1b5f2fb
homepage    : https://github.com/libbpf/bpftool
license     :
    - GPL-2.0-only
    - BSD-2-Clause
summary     : Inspection and simple manipulation of eBPF programs and maps
description : |
    Inspection and simple manipulation of eBPF programs and maps
builddeps   :
    - binary(llvm-config)
    - binary(rst2man)
    - pkgconfig(libcap)
    - pkgconfig(libelf)
    - binutils-devel
environment : |
    _common_args="-C src \
                  prefix=/usr \
                  mandir=%(mandir)"
build       : |
    %make \
          ${_common_args} \
          HOSTCC="${CC}" \
          EXTRA_CFLAGS="${CFLAGS}" \
          EXTRA_LDFLAGS="${LDFLAGS}" \
          all doc
install     : |
    %make_install ${_common_args} doc-install

    mv %(installroot)/usr/{sbin,bin}
