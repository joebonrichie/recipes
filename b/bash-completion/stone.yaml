#
# SPDX-FileCopyrightText: Â© 2020-2024 Serpent OS Developers
#
# SPDX-License-Identifier: MPL-2.0
#
name        : bash-completion
version     : 2.17.0
release     : 12
homepage    : https://github.com/scop/bash-completion
upstreams   :
    - https://github.com/scop/bash-completion/releases/download/2.17.0/bash-completion-2.17.0.tar.xz : dd9d825e496435fb3beba3ae7bea9f77e821e894667d07431d1d4c8c570b9e58
summary     : Programmable completion functions for bash
description : |
    bash-completion is a collection of command line command completions for the Bash shell, collection of helper functions to assist in creating new completions, and set of facilities for loading completions automatically on demand, as well as installing them.
license     :
    - GPL-2.0-or-later
builddeps   :
    - binary(coreutils)
setup       : |
    %patch %(pkgdir)/0001-Use-a-stateless-configuration.patch

    %reconfigure
build       : |
    %make
install     : |
    %make_install

    # Remove conflicts with coreutils (uutils)
    for i in $(coreutils --list) ; do
        case $i in
            uptime|kill|more|groups|hostname)
                continue
                ;;
            *)
                rm -vf %(installroot)%(bashcompletionsdir)/$i
                ;;
        esac
    done

    # provided by libsecret
    rm -fv %(installroot)%(bashcompletionsdir)/secret-tool

    # provided by tmux
    rm -fv %(installroot)%(bashcompletionsdir)/tmux
packages    :
    - "%(name)-devel":
        paths:
            - /usr/share/cmake/
