#
# SPDX-FileCopyrightText: Â© 2020-2024 Serpent OS Developers
#
# SPDX-License-Identifier: MPL-2.0
#
name        : vulkan-loader
version     : 1.4.335.0
release     : 17
homepage    : https://vulkan.lunarg.com/doc/sdk
upstreams   :
    - https://github.com/KhronosGroup/Vulkan-Loader/archive/refs/tags/vulkan-sdk-1.4.335.0.tar.gz : e1d7f598d42fa87b38fd7e984968c660e406168db64df8e8e23c5be3a66e9bd8
summary     : Vulkan ICD desktop loader
description : |
    This project provides the Khronos official Vulkan ICD desktop loader.
license     :
    - Apache-2.0
builddeps   :
    - binary(git)
    - cmake(VulkanHeaders)
    - pkgconfig32(wayland-client)
    - pkgconfig32(x11)
    - pkgconfig32(xrandr)
emul32     : true
profiles   :
    - emul32:
        environment: |
            # This is required so that the assembler test in cmake succeeds
            export ASFLAGS=" --32"
            export CFLAGS+=" -m32"
            export CXXFLAGS+=" -m32"
setup       : |
    %cmake \
        -DCMAKE_INSTALL_LIBDIR=lib%(libsuffix)
build       : |
    %cmake_build
install     : |
    %cmake_install
packages    :
    - "%(name)-devel":
        rundeps:
            # Not _strictly_ required, but the cmake FindVulkan.cmake module won't consider vulkan found without it
            - cmake(VulkanHeaders)
