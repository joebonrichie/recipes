#
# SPDX-FileCopyrightText: Â© 2020-2025 Serpent OS Developers
#
# SPDX-License-Identifier: MPL-2.0
#
name        : sof-bin
version     : "2025.12"
release     : 2
upstreams   :
    - https://github.com/thesofproject/sof-bin/releases/download/v2025.12/sof-bin-2025.12.tar.gz : 2f7aed784d2fa092c750651e949727f2ae4e9e39cca2c6bfed420f618adf2a9e
homepage    : https://www.sofproject.org
license     :
    - BSD-3-Clause
    - ISC
summary     : Sound Open Firmware
description : |
    Sound Open Firmware
builddeps   :
    - binary(find)
    - binary(rsync)
# Make sure none of the signed firmware gets stripped
debug       : false
strip       : false
install     : |
    %install_dir %(installroot)%(libdir)/firmware/intel %(installroot)%(bindir)

    FW_DEST="%(installroot)%(libdir)/firmware/intel" \
    TOOLS_DEST="%(installroot)%(bindir)" \
      ./install.sh

    # Fix permissions
    find %(installroot) -type d -exec chmod 755 {} +

    # Respect SOURCE_DATE_EPOCH
    find %(installroot) -exec touch --date="@$SOURCE_DATE_EPOCH" --no-dereference {} +
packages    :
    - "sof-firmware":
        summary     : Sound Open Firmware
        description : Sound Open Firmware
        paths:
            - /usr/lib/firmware/

    - "sof-tools":
        summary     : Sound Open Firmware - tools
        description : Sound Open Firmware - tools
        rundeps:
            - binary(python3)
        paths:
            - /usr/bin/
