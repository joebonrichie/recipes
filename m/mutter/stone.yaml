#
# SPDX-FileCopyrightText: Â© 2020-2024 Serpent OS Developers
#
# SPDX-License-Identifier: MPL-2.0
#
name        : mutter
version     : "49.1"
release     : 29
homepage    : https://gnome.org
upstreams   :
    - https://download.gnome.org/sources/mutter/49/mutter-49.1.tar.xz : 2b7ccc7266518e098f8996534ebe3e95ce5e7ca2322478f9de96330e7a14c7cb
summary     : A Wayland display server and compositor library.
description : |
    A Wayland display server and compositor library.
license     :
    - GPL-2.0-or-later
builddeps   :
    - binary(Xwayland)
    - binary(cvt)
    - binary(msgfmt)
    - binary(register-python-argcomplete)
    - binary(rst2man)
    - pkgconfig(atk)
    # - pkgconfig(bash-completion) # Bash completion installation is broken, TODO fix that
    - pkgconfig(cairo)
    - pkgconfig(cairo-gobject)
    - pkgconfig(colord)
    - pkgconfig(dbus-1)
    - pkgconfig(dri)
    - pkgconfig(egl)
    - pkgconfig(fribidi)
    - pkgconfig(gbm)
    - pkgconfig(gio-unix-2.0)
    - pkgconfig(gl)
    - pkgconfig(glesv2)
    - pkgconfig(glib-2.0)
    - pkgconfig(glycin-2)
    - pkgconfig(gmodule-no-export-2.0)
    - pkgconfig(gnome-desktop-4)
    - pkgconfig(gnome-settings-daemon)
    - pkgconfig(gobject-2.0)
    - pkgconfig(gobject-introspection-1.0)
    - pkgconfig(graphene-gobject-1.0)
    - pkgconfig(gsettings-desktop-schemas)
    - pkgconfig(gtk4)
    - pkgconfig(gtk4-x11)
    - pkgconfig(gudev-1.0)
    - pkgconfig(harfbuzz)
    - pkgconfig(json-glib-1.0)
    - pkgconfig(lcms2)
    - pkgconfig(libadwaita-1)
    - pkgconfig(libcanberra)
    - pkgconfig(libdisplay-info)
    - pkgconfig(libdrm)
    - pkgconfig(libei-1.0)
    - pkgconfig(libeis-1.0)
    - pkgconfig(libinput)
    - pkgconfig(libpipewire-0.3)
    - pkgconfig(libstartup-notification-1.0)
    - pkgconfig(libsystemd)
    - pkgconfig(libudev)
    - pkgconfig(libwacom)
    - pkgconfig(pango)
    - pkgconfig(pangocairo)
    - pkgconfig(pangoft2)
    - pkgconfig(sysprof-6)
    - pkgconfig(sysprof-capture-4)
    - pkgconfig(udev)
    - pkgconfig(wayland-client)
    - pkgconfig(wayland-cursor)
    - pkgconfig(wayland-egl)
    - pkgconfig(wayland-eglstream-protocols)
    - pkgconfig(wayland-protocols)
    - pkgconfig(wayland-server)
    - pkgconfig(x11)
    - pkgconfig(x11-xcb)
    - pkgconfig(xau)
    - pkgconfig(xcb-randr)
    - pkgconfig(xcb-res)
    - pkgconfig(xcomposite)
    - pkgconfig(xcursor)
    - pkgconfig(xdamage)
    - pkgconfig(xext)
    - pkgconfig(xfixes)
    - pkgconfig(xi)
    - pkgconfig(xinerama)
    - pkgconfig(xkbcommon)
    - pkgconfig(xkbfile)
    - pkgconfig(xkeyboard-config)
    - pkgconfig(xrandr)
    - pkgconfig(xrender)
    - pkgconfig(xwayland)
    - mesa-libegl-devel
rundeps     :
    - binary(gnome-session)
    - binary(pipewire) # DMA-BUF
    - binary(Xwayland)
setup       : |
    %meson \
        -Degl_device=true \
        -Dtests=disabled \
        -Dprofiler=true \
        -Dwayland_eglstream=true
build       : |
    %meson_build
install     : |
    %meson_install
    %install_file %(installroot)/etc/bash_completion.d/gdctl %(installroot)/%(completionsdir)/gdctl
packages    :
    - "%(name)-devel":
        paths:
            - /usr/share/applications/org.gnome.Mutter.Mdk.desktop
            - /usr/share/glib-2.0/schemas/org.gnome.mutter.devkit.gschema.xml
            - /usr/share/icons/hicolor/*/apps/org.gnome.Mutter.Mdk*
            - /usr/lib/mutter/mutter-devkit
