#
# SPDX-FileCopyrightText: Â© 2020-2024 Serpent OS Developers
#
# SPDX-License-Identifier: MPL-2.0
#
name        : mimalloc
version     : 2.2.6
release     : 10
homepage    : https://github.com/microsoft/mimalloc
upstreams   :
    - https://github.com/microsoft/mimalloc/archive/refs/tags/v2.2.6.tar.gz: f2d59a2e5e8ddffb6f98484c39e4ef7ba22abb4c20e59cfdd387c897ac2f5b28
summary     : Compact general purpose allocator
description : |
    mimalloc is a compact general purpose allocator with excellent performance.
license     : MIT
setup       : |
    %cmake \
        -DMI_BUILD_OBJECT=OFF \
        -DMI_BUILD_STATIC=ON \
        -DMI_INSTALL_TOPLEVEL=ON
build       : |
    %cmake_build
install     : |
    %cmake_install
check       : |
    %cmake_test
tuning      :
    - lto: full
    - optimize: speed
packages    :
    - "%(name)-static":
        summary: Static libs for %(name)
        description: Static libs for %(name)
        paths:
            - /usr/lib/lib*.a
        rundeps:
            - "%(name)-devel"
