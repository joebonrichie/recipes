#
# SPDX-FileCopyrightText: Â© 2020-2024 Serpent OS Developers
#
# SPDX-License-Identifier: MPL-2.0
#
name        : micro
version     : 2.0.15
release     : 7
homepage    : https://micro-editor.github.io/
upstreams   :
    - https://github.com/zyedidia/micro/archive/refs/tags/v2.0.15.tar.gz : 612c775321c268c8f9e1767505ff378bca9b9ab66f5c41b69ecb2464ecf15084
summary     : A modern and intuitive terminal-based text editor
description : |
    A modern and intuitive terminal-based text editor
license     :
    - JSON
    - MIT
builddeps   :
   - binary(go)
#[LATER] rundep: xclip
networking  : yes
build       : |
    export CGO_CPPFLAGS="${CPPFLAGS}"
    export CGO_CFLAGS="${CFLAGS}"
    export CGO_CXXFLAGS="${CXXFLAGS}"
    export CGO_LDFLAGS="${LDFLAGS}"
    export GOFLAGS="-buildmode=pie -trimpath -modcacherw -ldflags=-linkmode=external"

    %make CGO_ENABLED=1
install     : |
    %install_bin micro
    %install_file assets/packaging/micro.1 -t %(installroot)/%(mandir)/man1
    %install_file assets/packaging/micro.desktop -t %(installroot)/%(mandir)/applications/
    %install_file assets/micro-logo-mark.svg %(installroot)%(datadir)/icons/hicolor/scalable/apps/micro.svg
