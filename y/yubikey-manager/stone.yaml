#
# SPDX-FileCopyrightText: Â© 2025- AerynOS Developers
#
# SPDX-License-Identifier: MPL-2.0
#
name        : yubikey-manager
version     : 5.9.0
release     : 2
homepage    : https://developers.yubico.com/yubikey-manager/
upstreams   :
    - https://github.com/Yubico/yubikey-manager/releases/download/5.9.0/yubikey_manager-5.9.0.tar.gz : fb97e8013d426d5107602152b151e32a099204617b34e8673497346c902e96f7
summary     : Command line utility for configuring your YubiKey
description : |
    Python library and command line tool for configuring any YubiKey over all USB transports.
license     : BSD-2-Clause
builddeps   :
    - pkgconfig(libpcsclite)
    - python(click)
    - python(cryptography)
    - python(fido2)
    - python(installer)
    - python(keyring)
    - python(poetry-core)
    - python(pyscard)
    - python(python-pskc)
rundeps     :
    - ccid
    - pcsclite
    - python(click)
    - python(cryptography)
    - python(fido2)
    - python(keyring)
    - python(pyscard)
    - python(python-pskc)
build       : |
    %pyproject_build
install     : |
    %pyproject_install

    %install_file %(workdir)/man/ykman.1 -t %(installroot)%(mandir)/man1/

    %install_file COPYING -t %(installroot)/usr/share/licenses/%(name)/

    export PYTHONPATH=/usr/lib/python3.11/site-packages:%(installroot)%(libdir)/python3.11/site-packages

    _YKMAN_COMPLETE=bash_source %(installroot)/usr/bin/ykman | %install_file /dev/stdin %(installroot)%(bashcompletionsdir)/ykman
    _YKMAN_COMPLETE=zsh_source %(installroot)/usr/bin/ykman | %install_file /dev/stdin %(installroot)%(zshcompletionsdir)/_ykman
    _YKMAN_COMPLETE=fish_source %(installroot)/usr/bin/ykman | %install_file /dev/stdin %(installroot)%(fishcompletionsdir)/ykman.fish

