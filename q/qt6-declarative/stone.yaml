#
# SPDX-FileCopyrightText: Â© 2020-2024 Serpent OS Developers
#
# SPDX-License-Identifier: MPL-2.0
#
name        : qt6-declarative
version     : 6.9.3
release     : 14
homepage    : https://www.qt.io
upstreams   :
    - https://download.qt.io/official_releases/qt/6.9/6.9.3/submodules/qtdeclarative-everywhere-src-6.9.3.tar.xz : 5a071b227229afbf5c976b7b59a0d850818d06ae861fcdf6d690351ca3f8a260
summary     : Classes for QML and JavaScript languages
description : |
    The Qt Quick module is the standard library for writing QML applications. While the Qt QML module provides the QML engine and language infrastructure, the Qt Quick module provides all the basic types necessary for creating user interfaces with QML.
license     :
    - GFDL-1.3-or-later
    - GPL-3.0-or-later
    - LGPL-3.0-or-later
builddeps   :
    - cmake(Qt6CorePrivate)
    - cmake(Qt6LanguageServerPrivate)
    - cmake(Qt6ShaderTools)
    - cmake(Qt6Svg)
setup       : |
    # Breaks replies in nheko
    %patch %(pkgdir)/0001-Revert-Positioners-hide-zero-width-or-height-items.patch

    # Note that due to our build modifications Qt6LinguistTools will be reported as missing, but it uses it just fine
    # TODO fix that
    %cmake_qt6
build       : |
    %cmake_build
install     : |
    %cmake_install

    # Setup user-facing binaries
    %qt_user_facing_links
    ln -srv %(installroot)/%(libdir)/qt6/qmlcachegen %(installroot)/%(bindir)/qmlcachegen6
packages    :
    - "%(name)-devel":
        paths:
          - /usr/bin/qml*
          - /usr/lib/objects-*
          - /usr/lib/qt6/bin/qml*
          - /usr/lib/qt6/bin/svgtoqml
          - /usr/lib/qt6/plugins/qmllint/
          - /usr/lib/qt6/plugins/qmlls/
          - /usr/lib/qt6/plugins/qmltooling/
          - /usr/lib/qt6/qmlaotstats
          - /usr/lib/qt6/qmlcachegen
          - /usr/lib/qt6/qmlimportscanner
          - /usr/lib/qt6/qmljsrootgen
          - /usr/lib/qt6/qmltyperegistrar
